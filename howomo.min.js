var num=2035028;var layer=new google.maps.FusionTablesLayer(num);var now_showing_name="All";var now_showing_location="";function initializeMap(){var a=new google.maps.Map(document.getElementById("howomo-map"),{center:new google.maps.LatLng(38.94232097947902,-92.3291015625),zoom:7,mapTypeId:"roadmap"});layer.setMap(a);layer.setQuery("SELECT * FROM "+num);document.getElementById("howomo-nowshowing").innerHTML="All";document.getElementById("howomo-listofhouses").innerHTML="";document.getElementById("howomo-mapslink").innerHTML=""}function showDenominations(){var a=encodeURIComponent("SELECT 'Denomination' FROM 420855 {ORDER BY 'Denomination' {ASC}} ");var b=new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq="+a);b.send(getData)}function getData(b){var e=b.getDataTable().getNumberOfRows();var d='<select onchange="changeMapForDenominations(this.value); showNames(this.value);">';d+="<option value='All'>Choose...</option>";for(var c=0;c<e;c++){var a=b.getDataTable().getValue(c,0);d+='<option value="'+a+'">';d+=a;d+="</option>"}d+="</select>";document.getElementById("howomo-listofdenominations").innerHTML=d}function changeMapForDenominations(a){initializeMap();document.getElementById("howomo-mapslink").innerHTML="";if(a==="All"){return}else{now_showing_name=a;document.getElementById("howomo-nowshowing").innerHTML=now_showing_name;a=a.replace("'","\\'");layer.setQuery("SELECT Location FROM "+num+" WHERE Denomination LIKE '"+a+"'")}}function showNames(b){b=b.replace("'","\\'");var a=encodeURIComponent("SELECT 'Name', 'City', 'Website', 'Location' FROM 401562 {WHERE 'Denomination' LIKE '"+b+"' } {ORDER BY 'City' {ASC}} ");var c=new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq="+a);c.send(getNameData)}function getNameData(d){var h=d.getDataTable().getNumberOfRows();var c=d.getDataTable().getNumberOfColumns();var b=now_showing_name.replace(" ","").replace(" ","").replace(" ","").replace("'","");var f="<ul>";for(var g=0;g<h;g++){f+="<li>";for(var e=0;e<3;e++){var a=d.getDataTable().getValue(g,e);var k=a.split("'").join("\\\x27");if(e===0){f+="<a href='#"+b+g+"'";f+="onclick=\"changeMapForNames('"+k+"', '"+d.getDataTable().getValue(g,1)+"', '"+d.getDataTable().getValue(g,3)+"');\"";f+=">";f+=d.getDataTable().getValue(g,e);f+="</a>"}else{if(d.getDataTable().getValue(g,e)!==""){if(e===1){f+=" ("+d.getDataTable().getValue(g,e)+") "}if(e===2){f+=" (<a href='"+d.getDataTable().getValue(g,e)+"'>website</a>)<br>"}}}}f+="</li>"}f+="</ul>";document.getElementById("howomo-listofhouses").innerHTML=f}function changeMapForNames(c,b,f){now_showing_name=c;now_showing_location=b;document.getElementById("howomo-nowshowing").innerHTML=now_showing_name+" ("+b+")";c=c.replace("'","\\'");var a=f.split(",");var e=new google.maps.LatLng(parseFloat(a[0]),parseFloat(a[1]));var d=new google.maps.Map(document.getElementById("howomo-map"),{center:e,zoom:14,mapTypeId:"roadmap"});layer.setMap(d);getHouseData(c)}function getHouseData(a){var b=encodeURIComponent("SELECT 'Address 1', 'Address 2', 'City', 'State', 'ZIP' FROM "+num+" WHERE Name LIKE '"+a+"'");var c=new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq="+b);c.send(d);function d(e){var j=e.getDataTable().getNumberOfColumns();var f="";for(var g=0;g<j;g++){f+=e.getDataTable().getValue(0,g);f+="+"}f=f.replace(" ","+");var h='<a target="_blank" href="http://maps.google.com/maps?q='+f+'">visit Google Maps</a>';document.getElementById("howomo-mapslink").innerHTML="To get directions or print a map of this location, "+h+"."}};